import{Q as l,a as b}from"./QCard.e4543373.js";import{Q as g}from"./QSelect.7375c7f4.js";import{Q as r}from"./QInput.19253bad.js";import{_ as A,r as a,aG as Q,aA as C,o as c,c as _,w as n,b as i,ak as y,h as p,aj as u,ag as q,aF as V,Q as w,e as d}from"./index.84a03356.js";import{Q as T}from"./QSpace.44c390bd.js";import{Q as v}from"./QFile.7911c0a8.js";import{Q as S}from"./QForm.354579a1.js";import{Q as k}from"./QPage.45ee8f60.js";import"./use-dark.28ca17e4.js";import"./QItem.f413186c.js";import"./QItemLabel.83c7f352.js";import"./QMenu.56008c92.js";import"./use-prevent-scroll.a70b7d0f.js";import"./focus-manager.d6507951.js";import"./QDialog.3ff4f6d7.js";import"./use-form.39c6ddc7.js";import"./format.2a3572e1.js";const O={name:"AddQuestionPage",setup(){return{question:a(""),questionType:a(null),options:["Listening Comprehension","Structure and Written","Reading Comprehension"],questionPart:a(""),paragraphs:a(""),correctAnswer:a(""),file_path:a(null),partOptions:["A","B","C"],audiofile:a(null),option1:a("Option 1"),option2:a("Option 2"),option3:a("Option 3"),option4:a("Option 4"),correctAnswerr:a(null),answerIsAdded:a(!1)}},data(){return{answer:a(""),answerOptions:a([])}},methods:{async onClick(){this.answerOptions.length>0?(this.answerOptions=[],this.answerOptions.push(this.option1,this.option2,this.option3,this.option4)):this.answerOptions.push(this.option1,this.option2,this.option3,this.option4),this.answerIsAdded=!0},checkFileType(s){return s.filter(t=>t.type==="audio/mpeg")},onFileRejected(s){this.$q.notify({type:"negative",message:`${s.length} file(s) did not pass validation constraints`})},async onClickSubmit(){this.answerIsAdded?this.onSubmit():this.$q.notify({message:"Correct Answer and Options Required",color:"negative"})},async onSubmit(){try{this.$q.loading.show({message:"Adding new Question"});const s=[...this.answerOptions];if(this.audiofile){const t=this.audiofile,h=new FormData;h.append("audiofile",this.audiofile),await Q.post("/azureBlob/upload",h,{headers:{"Content-Type":"multiform/form-data"}});const f=await(await C.getFileInfo(t.name)).data.blobUrl,m={question:this.question,type:this.questionType,paragraphs:this.paragraphs,audioUrl:f,answers:s,correctAnswer:this.correctAnswerr,testExam:this.$route.params.id};await this.$store.dispatch("admin/addQuestion",m)}else{const t={question:this.question,type:this.questionType,paragraphs:this.paragraphs,audioUrl:"",answers:s,correctAnswer:this.correctAnswerr,testExam:this.$route.params.id};await this.$store.dispatch("admin/addQuestion",t)}}catch(s){console.log(s),this.$q.loading.hide(),this.$q.notify({message:s,color:"negative"})}finally{this.$q.loading.hide(),this.$router.back(),this.$q.notify({message:"Add Successful"})}}}},x=d("div",{class:"text-h6 text-center"}," Tambah Data Soal ",-1),U={key:0},R=d("small",null,"A",-1),B=d("small",null,"B",-1),F=d("small",null,"C",-1),E=d("small",null,"D",-1),P={key:0},D={class:"row"};function I(s,t,h,e,f,m){return c(),_(k,{padding:"",class:"flex flex-center"},{default:n(()=>[i(b,{class:"full-width"},{default:n(()=>[i(S,{class:"q-gutter-md",onSubmit:y(m.onClickSubmit,["prevent"]),onReset:s.onReset},{default:n(()=>[i(l,null,{default:n(()=>[x]),_:1}),i(l,null,{default:n(()=>[i(g,{modelValue:e.questionType,"onUpdate:modelValue":t[0]||(t[0]=o=>e.questionType=o),label:"Select Question Type","transition-show":"jump-up","transition-hide":"jump-up",filled:"",options:e.options},null,8,["modelValue","options"])]),_:1}),p(i(l,null,{default:n(()=>[i(r,{modelValue:e.question,"onUpdate:modelValue":t[1]||(t[1]=o=>e.question=o),type:"text",label:"Question",rules:[o=>!!o||"Question is required"]},null,8,["modelValue","rules"])]),_:1},512),[[u,e.questionType]]),p(i(l,null,{default:n(()=>[e.questionType==="Reading Comprehension"?(c(),q("div",U,[i(r,{modelValue:e.paragraphs,"onUpdate:modelValue":t[2]||(t[2]=o=>e.paragraphs=o),name:"paragraphs",type:"textarea",label:"Reading Paragraph",rules:[o=>!!o||"Reading Paragraph is required"]},null,8,["modelValue","rules"])])):V("",!0)]),_:1},512),[[u,e.questionType==="Reading Comprehension"]]),p(i(l,null,{default:n(()=>[i(r,{modelValue:e.option1,"onUpdate:modelValue":t[3]||(t[3]=o=>e.option1=o),type:"text",label:"Enter answer",dense:""},{prepend:n(()=>[R]),_:1},8,["modelValue"]),i(r,{modelValue:e.option2,"onUpdate:modelValue":t[4]||(t[4]=o=>e.option2=o),type:"text",label:"Enter answer",dense:""},{prepend:n(()=>[B]),_:1},8,["modelValue"]),i(r,{modelValue:e.option3,"onUpdate:modelValue":t[5]||(t[5]=o=>e.option3=o),type:"text",label:"Enter answer",dense:""},{prepend:n(()=>[F]),_:1},8,["modelValue"]),i(r,{modelValue:e.option4,"onUpdate:modelValue":t[6]||(t[6]=o=>e.option4=o),type:"text",label:"Enter answer",dense:""},{prepend:n(()=>[E]),_:1},8,["modelValue"]),i(w,{flat:"",color:"primary",label:"Add Answer Options",onClick:y(m.onClick,["prevent"])},null,8,["onClick"]),i(T),i(g,{modelValue:e.correctAnswerr,"onUpdate:modelValue":t[7]||(t[7]=o=>e.correctAnswerr=o),options:f.answerOptions,hint:"To add Correct Answer please click the button above after adding your options",label:"Correct Answer",filled:"",rules:[o=>!!o||"Correct Answer is required"]},null,8,["modelValue","options","rules"])]),_:1},512),[[u,e.questionType]]),p(i(l,null,{default:n(()=>[e.questionType==="Listening Comprehension"?(c(),q("div",P,[i(v,{modelValue:e.audiofile,"onUpdate:modelValue":t[8]||(t[8]=o=>e.audiofile=o),name:"audiofile",clearable:"",filled:"",accept:".mp3, audio/mpeg",hint:"Only support .mp3 audio file",label:"Audio File",rules:[o=>!!o||"Audio is required"]},null,8,["modelValue","rules"])])):V("",!0)]),_:1},512),[[u,e.questionType==="Listening Comprehension"]]),p(i(l,null,{default:n(()=>[d("div",D,[i(w,{class:"full-width",flat:"",color:"secondary",label:"Cancel",to:{name:"datasoal",params:{id:s.$route.params.id}}},null,8,["to"]),i(w,{class:"full-width",type:"submit",color:"primary",label:"Save"})])]),_:1},512),[[u,e.questionType]])]),_:1},8,["onSubmit","onReset"])]),_:1})]),_:1})}var ie=A(O,[["render",I]]);export{ie as default};
