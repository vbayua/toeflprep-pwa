import{d as U,r,_ as b,o as x,c as T,w as o,b as t,h as m,Q as n,e as u,aA as S,a as D,i as $,t as h,ak as q,g as C}from"./index.84a03356.js";import{Q as A,a as g}from"./QTr.7ab39b7b.js";import{Q as f,a as y}from"./QCard.e4543373.js";import{Q as v}from"./QCardActions.2fccd58c.js";import{Q as _}from"./QDialog.3ff4f6d7.js";import{Q as E}from"./QInput.19253bad.js";import{Q as V}from"./QForm.354579a1.js";import{Q as P}from"./QTable.ad33ed59.js";import{Q as B}from"./QPage.45ee8f60.js";import{C as p}from"./ClosePopup.aebf0a38.js";import"./use-dark.28ca17e4.js";import"./use-prevent-scroll.a70b7d0f.js";import"./focus-manager.d6507951.js";import"./format.2a3572e1.js";import"./use-form.39c6ddc7.js";import"./QSeparator.ba6a8f71.js";import"./QList.bd040621.js";import"./QMarkupTable.d57badb1.js";import"./QSelect.7375c7f4.js";import"./QItem.f413186c.js";import"./QItemLabel.83c7f352.js";import"./QMenu.56008c92.js";import"./option-sizes.005a78de.js";const N=U({name:"AddExamComponent",setup(){return{prompt:r(!1),title:r("")}},methods:{async onSubmit(){try{if(this.title){this.$q.loading.show({message:"Creating new test"});const a={title:this.title,status:"inactive"};await this.$store.dispatch("admin/createExam",a),this.$q.notify({message:"Create succesful!",color:"positive"}),location.reload()}else return this.$q.notify({message:"Title Cannot Be Empty!",color:"negative"}),this.$q.loading.hide()}catch(a){this.$q.loading.hide(),this.$q.notify({message:`Error : ${a.message}`,color:"negative"})}finally{this.$q.loading.hide()}}}}),R=u("div",{class:"text-h6"}," New Test ",-1);function j(a,e,Q,i,w,c){return x(),T(_,{modelValue:a.prompt,"onUpdate:modelValue":e[2]||(e[2]=d=>a.prompt=d),persistent:""},{default:o(()=>[t(y,{style:{"min-width":"350px"}},{default:o(()=>[t(V,{class:"q-gutter-md",onSubmit:a.onSubmit,onReset:a.onReset},{default:o(()=>[t(f,null,{default:o(()=>[R]),_:1}),t(f,{class:"q-pt-none"},{default:o(()=>[t(E,{modelValue:a.title,"onUpdate:modelValue":e[0]||(e[0]=d=>a.title=d),autofocus:"",dense:"",type:"text",label:"Test Title",onKey:e[1]||(e[1]=d=>a.prompt=!1)},null,8,["modelValue"])]),_:1}),t(v,{align:"right",class:"text-primary"},{default:o(()=>[m(t(n,{flat:"",label:"Cancel"},null,512),[[p]]),m(t(n,{type:"submit",flat:"",label:"Confirm"},null,512),[[p]])]),_:1})]),_:1},8,["onSubmit","onReset"])]),_:1})]),_:1},8,["modelValue"])}var z=b(N,[["render",j]]);const F=[{name:"title",align:"left",label:"Test Title",field:"title",sortable:!0},{name:"status",align:"right",label:"Status",field:"status"},{name:"actions",align:"right",label:"Actions",field:"actions"}],I={name:"ExamData",components:{AddExamComponentVue:z},setup(){return{prompt:r(!1),updatePrompt:r(!1),confirm:r(!1),title:r(!1),titleToUpdate:r(""),columns:F}},data(){return{rows:r([])}},computed:{exams(){return this.$store.state.exam}},mounted(){this.$q.loading.show({message:"Loading Data"}),this.$store.dispatch("admin/getAllExam").then(a=>{this.rows=a.data.exams,this.$q.loading.hide()},a=>{this.$q.notify({message:`Error : ${a.message}`}),this.$q.loading.hide()})},methods:{toDataSoal(a){this.$router.push({name:"datasoal",params:{id:a}})},async archiveExam(a){try{this.$q.loading.show({message:"Saving to archive"});const e="archived";await S.updateExamStatus(a,e)}catch(e){this.$q.loading.hide(),this.$q.notify({message:`Error : ${e.message}`,color:"negative"})}finally{this.$q.loading.hide(),this.$q.notify({message:"Moved to archive",color:"secondary"}),location.reload()}},async onUpdateClick(a){this.titleToUpdate=a},async updateExam(a){try{if(this.titleToUpdate){this.$q.loading.show({message:"Updating Test Title"});const e={_id:a,title:this.titleToUpdate,status:"inactive"};await this.$store.dispatch("admin/updateExam",e),this.$q.notify({message:"Update successful",color:"positive"}),setTimeout(location.reload(),1e3)}else return this.$q.notify({message:"Title Cannot Be Empty!",color:"negative"}),this.$q.loading.hide()}catch(e){this.$q.loading.hide(),this.$q.notify({message:`Error : ${e.message}`,color:"negative"})}finally{this.$q.loading.hide()}}}},L={class:"row q-mt-md q-ml-auto"},M=u("span",{class:"q-ml-sm"},"Are you sure?",-1),K=u("div",{class:"text-h6"}," Edit Test Title ",-1),O={class:"full-width row flex-center text-black q-gutter-sm"};function Y(a,e,Q,i,w,c){const d=D("AddExamComponentVue");return x(),T(B,{padding:""},{default:o(()=>[t(d,{modelValue:i.prompt,"onUpdate:modelValue":e[0]||(e[0]=l=>i.prompt=l)},null,8,["modelValue"]),u("div",L,[t(P,{title:"Data Ujian TOEFL",rows:w.rows,columns:i.columns,"row-key":"title",class:"full-width",style:{"min-height":"100vh"}},{"top-right":o(()=>[t(n,{color:"primary",label:"Tambah Data Ujian",onClick:e[1]||(e[1]=l=>i.prompt=!0)})]),body:o(l=>[t(A,{props:l},{default:o(()=>[t(g,{key:"title",props:l},{default:o(()=>[$(h(l.row.title),1)]),_:2},1032,["props"]),t(g,{key:"status",props:l},{default:o(()=>[$(h(l.row.status),1)]),_:2},1032,["props"]),t(g,{key:"actions",props:l},{default:o(()=>[t(n,{flat:"",dense:"",color:"dark","icon-right":"post_add",label:"Data Soal",to:{name:"datasoal",params:{id:l.row._id}}},null,8,["to"]),t(n,{flat:"",round:"",color:"secondary",icon:"edit",dense:"",onClick:q(s=>{i.updatePrompt=!0,c.onUpdateClick(l.row.title)},["prevent"])},null,8,["onClick"]),t(n,{flat:"",round:"",color:"negative",icon:"delete",dense:"",onClick:s=>c.archiveExam(l.row._id)},null,8,["onClick"]),t(_,{modelValue:i.confirm,"onUpdate:modelValue":e[2]||(e[2]=s=>i.confirm=s),persistent:""},{default:o(()=>[t(y,null,{default:o(()=>[t(f,{class:"row items-center"},{default:o(()=>[M]),_:1}),t(v,{align:"right"},{default:o(()=>[m(t(n,{flat:"",label:"Cancel",color:"primary"},null,512),[[p]]),m(t(n,{flat:"",label:"YES",color:"primary",onClick:s=>c.archiveExam(l.row._id)},null,8,["onClick"]),[[p]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"]),t(_,{modelValue:i.updatePrompt,"onUpdate:modelValue":e[4]||(e[4]=s=>i.updatePrompt=s),persistent:""},{default:o(()=>[t(y,{style:{"min-width":"350px"}},{default:o(()=>[t(V,{class:"q-gutter-md",onSubmit:q(s=>c.updateExam(l.row._id),["prevent"])},{default:o(()=>[t(f,null,{default:o(()=>[K]),_:1}),t(f,{class:"q-pt-none"},{default:o(()=>[t(E,{modelValue:i.titleToUpdate,"onUpdate:modelValue":e[3]||(e[3]=s=>i.titleToUpdate=s),autofocus:"",dense:"",type:"text",label:"Test Title"},null,8,["modelValue"])]),_:1}),t(v,{align:"right",class:"text-primary"},{default:o(()=>[m(t(n,{flat:"",label:"Cancel"},null,512),[[p]]),m(t(n,{type:"submit",flat:"",label:"Save"},null,512),[[p]])]),_:1})]),_:2},1032,["onSubmit"])]),_:2},1024)]),_:2},1032,["modelValue"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),"no-data":o(({icon:l,message:s,filter:k})=>[u("div",O,[t(C,{size:"2em",name:"sentiment_dissatisfied"}),u("span",null,h(s),1),t(C,{size:"2em",name:k?"filter_b_and_w":l},null,8,["name"])])]),_:1},8,["rows","columns"])])]),_:1})}var yt=b(I,[["render",Y]]);export{yt as default};
